<!DOCTYPE HTML>
<html>
<head>
	<title>Physics</title>
	
	<style>
		body {    
			margin: 10;
			padding: 0;
		}
		table, th, td {
		   border: 1px solid black;
		}
		table {
			border-collapse: collapse;
		}
	</style>

</head>

<body style="width:100%;height:100%;overflow-x:hidden;">
	<form>
		Max pos:<br>
		<input type="number" id="maxy" value="10" style="margin:5px"><br>
		Min pos:<br>
		<input type="number" id="miny" value="-10" style="margin:5px"><br>
		Max t:<br>
		<input type="number" id="maxt" value="10" min="0" step=".1" style="margin:5px"><br>
	</form>
	
	<br><br><br>
	
	<form>
		Start position:<br>
		<input type="number" id="spos" value="0" style="margin:5px"><br>
		Start velocity:<br>
		<input type="number" id="svel" value="0" style="margin:5px"><br>
		Interval (dt):<br>
		<input type="number" id="interval" value="0.1" min="0" step=".1" style="margin:5px"><br>
		Acceleration (use 'pos' for x position):<br>
		<textarea id="accel" style="margin:5px">-pos</textarea><br>
		
		<input type="button" onclick="run()" value="Run" style="margin:15px">
	</form>
	
	<canvas id="canvas" width=800 height=400></canvas>
	
	<div style="margin:10px">
		<table>
			<thead>
				<th>t</th>
				<th>pos (x)</th>
				<th>vel (dx/dt)</th>
				<th>acc (dx2/dt2)</th>
			</thead>
			<tbody id="output">
			</tbody>
		</table>
	</div>
</body>

<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>

<script>
	var spos = document.getElementById("spos");
	var svel = document.getElementById("svel");
	var interval = document.getElementById("interval");
	var accel = document.getElementById("accel");
	
	var maxy = document.getElementById("maxy").value;
	var miny = document.getElementById("miny").value;
	var maxt = document.getElementById("maxt").value;
	
	var canvas = document.getElementById("canvas");
	var g = canvas.getContext('2d');
	
	var t;
	var pos;
	var vel;
	var acc;
	
	drawGrid();
	
	function run(){

		if (interval.value === 0) {
			alert("Don't play games with me.");
			return;
		}
		
		go = false;
		
		accref = accel.value;
	
		t = 0;
		inter = interval.value;
		pos = 1 * spos.value;
		vel = 1 * svel.value;
		acc = eval(accref);
		
		drawGrid();
		$('#output').empty();
	
		g.strokeStyle = '#ff0000';
		g.beginPath();
		g.moveTo(conX(0), conY(pos));
		
		go = true;
		
		tick();
	}
	
	function tick(){
		var html = "<tr><td>" + t.toFixed(3) + "</td><td>" + pos.toFixed(3) + "</td><td>" + vel.toFixed(3) + "</td><td>" + acc.toFixed(3) + "</td></tr>";
		$('#output').append( html );
	
		acc = eval(accref);
		vel += acc * inter;
		pos += vel * inter;
		
		t+= 1 * inter;
		
		g.lineTo(conX(t), conY(pos));
		g.stroke();
		
		if((go && t < 10) || t === 0){
			setTimeout(tick, 0);
		}
	}
	
	function getAccel(){
		return accel.innerHTML;
	}
	
	function drawGrid(){
		maxy = document.getElementById("maxy").value;
		miny = document.getElementById("miny").value;
		maxt = document.getElementById("maxt").value;
	
		g.clearRect(0, 0, canvas.offsetWidth, canvas.offsetHeight);
	
		g.strokeStyle = '#000000';
		g.lineWidth = 3;
	
		g.beginPath();
		g.moveTo(conX(0), conY(maxy));
		g.lineTo(conX(0), conY(miny));
		g.stroke();
		
		g.moveTo(0, conY(0));
		g.lineTo(conX(maxt), conY(0));
		g.stroke();
		
		g.lineWidth = 2;
		
		for(var i = 1; i < maxt; i ++){
			g.moveTo(conX(i), conY(0) - 10);
			g.lineTo(conX(i), conY(0) + 10);
			g.stroke();
			
			if(conY(0) + 14 < canvas.offsetHeight){
				g.fillText(i, conX(i) + 4, conY(0) + 12);
			}else{
				g.fillText(i, conX(i) + 4, conY(0) - 6);
			}
		}
		
		for(var i = maxy - 1; i > miny; i --){
			if(i === 0){continue;}
			
			g.moveTo(conX(0) - 10, conY(i));
			g.lineTo(conX(0) + 10, conY(i));
			g.stroke();
			
			g.fillText(i, conX(0) + 12, conY(i) + 4);
		}
		
		g.lineWidth = 3;
	}
	
	function conX(x){
		return 10 + ((x / maxt) * (canvas.offsetWidth - 10));
	}
	
	function conY(y){
		return canvas.offsetHeight * (1 - ((y - miny) / (maxy - miny)));
	}
</script>

</html>